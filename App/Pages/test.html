<!DOCTYPE html>
<html>
    <head>
        <title>FitiBit</title></colspan="2"d >
        <meta charset="utf-8"/>
        <link rel="stylesheet" media="screen" type="text/css" href="../css/Pages/style.css">
        <script   src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script type="text/javascript" src="../js/callAPI.js"></script>
    </head>
<body>
<div id="conteneur">
<div id="container">
<div id="container_weight" style="min-width: 310px; height: 400px; margin: 0 auto"></div></div>
</div>

<script type="text/javascript">

        //var myLocation = "weight"; //default location
        getData("weight"); //get data for default location

        function changeWeightLocation(newLocation, id){
            getData(newLocation);
            $('button').removeClass("active-weight");
            $('#'+id).addClass("active-weight")
        }

        function renderChart(location) {
            if(location == "weight" || location == "weight/month" || location == "weight/year"){
                renderWeight(location);
            }
        }

        function renderWeight(weightLocation){
            var weights = JSON.parse(localStorage[''+weightLocation+'']);
            var weights_length = Object.keys(weights).length - 1;

            var myCategories = [];
            for (var i = 0; i <= weights_length; i++) {
                myCategories[i] = weights[''+weights_length-i+''].date;
            };
            
            var myData = [];
            for (var i = 0; i <= weights_length; i++) {
                myData[i] = weights[''+weights_length-i+''].weight;
            };

            $('#container_weight').highcharts({
                title: {
                    text: 'Poids',
                    x: -20 //center
                },
                xAxis: {
                    categories: myCategories
                },
                yAxis: {
                    title: {
                        text: 'Poids (Kg)'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    valueSuffix: ' Kg'
                },
                series: [{
                    name: 'Poids',
                    data: myData
                }]
            });
        }
        </script>
</body>
</html>